<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 5.0.0 (20220707.1540)
 -->
<!-- Title: UmlClassDiagram Pages: 1 -->
<svg width="6037pt" height="2243pt"
 viewBox="0.00 0.00 6037.00 2243.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2239.2)">
<title>UmlClassDiagram</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-2239.2 6033,-2239.2 6033,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_0</title>
<polygon fill="white" stroke="black" points="1691,-8 1691,-1495.6 4081,-1495.6 4081,-8 1691,-8"/>
<text text-anchor="middle" x="2886" y="-16.2" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_1</title>
<polygon fill="white" stroke="black" points="8,-1503.6 8,-2227.2 6021,-2227.2 6021,-1503.6 8,-1503.6"/>
<text text-anchor="middle" x="3014.5" y="-1511.8" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/libraries</text>
</g>
<!-- 0 -->
<g id="node1" class="node">
<title>0</title>
<polygon fill="#f2f2f2" stroke="black" points="1699.14,-1127.1 1699.14,-1487.1 2252.86,-1487.1 2252.86,-1127.1 1699.14,-1127.1"/>
<text text-anchor="middle" x="1976" y="-1470.5" font-family="Times,serif" font-size="14.00">LPToken</text>
<text text-anchor="middle" x="1976" y="-1453.7" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/LPToken.sol</text>
<polyline fill="none" stroke="black" points="1699.14,-1445.5 2252.86,-1445.5 "/>
<text text-anchor="start" x="1707.14" y="-1428.9" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="1707.14" y="-1412.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;name: string</text>
<text text-anchor="start" x="1707.14" y="-1395.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;symbol: string</text>
<text text-anchor="start" x="1707.14" y="-1378.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;factory: address</text>
<text text-anchor="start" x="1707.14" y="-1361.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;pair: address</text>
<text text-anchor="start" x="1707.14" y="-1344.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;tokenX: address</text>
<text text-anchor="start" x="1707.14" y="-1328.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;tokenY: address</text>
<text text-anchor="start" x="1707.14" y="-1311.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;initialized: bool</text>
<polyline fill="none" stroke="black" points="1699.14,-1303.1 2252.86,-1303.1 "/>
<text text-anchor="start" x="1707.14" y="-1286.5" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="1707.14" y="-1269.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_baseURI(): string</text>
<text text-anchor="start" x="1707.14" y="-1252.9" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="1707.14" y="-1236.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;initialize(_pair: address, _tokenX: address, _tokenY: address, _name: string, _symbol: string)</text>
<text text-anchor="start" x="1707.14" y="-1219.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;mint(to: address, tokenId: uint256)</text>
<text text-anchor="start" x="1707.14" y="-1202.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;burn(tokenId: uint256)</text>
<text text-anchor="start" x="1707.14" y="-1185.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getReserves(tokenId: uint128): (xReserves: uint128, yReserves: uint128)</text>
<text text-anchor="start" x="1707.14" y="-1168.9" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="1707.14" y="-1152.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;constructor(_factory: address)</text>
<text text-anchor="start" x="1707.14" y="-1135.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;tokenURI(tokenId: uint256): string</text>
</g>
<!-- 18 -->
<g id="node14" class="node">
<title>18</title>
<polygon fill="#f2f2f2" stroke="black" points="16.15,-1662.9 16.15,-1905.3 335.85,-1905.3 335.85,-1662.9 16.15,-1662.9"/>
<text text-anchor="middle" x="176" y="-1888.7" font-family="Times,serif" font-size="14.00">&lt;&lt;Library&gt;&gt;</text>
<text text-anchor="middle" x="176" y="-1871.9" font-family="Times,serif" font-size="14.00">Strings</text>
<text text-anchor="middle" x="176" y="-1855.1" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/libraries/Strings.sol</text>
<polyline fill="none" stroke="black" points="16.15,-1846.9 335.85,-1846.9 "/>
<text text-anchor="start" x="24.15" y="-1830.3" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="24.15" y="-1813.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;_SYMBOLS: bytes16</text>
<text text-anchor="start" x="24.15" y="-1796.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;_ADDRESS_LENGTH: uint8</text>
<polyline fill="none" stroke="black" points="16.15,-1788.5 335.85,-1788.5 "/>
<text text-anchor="start" x="24.15" y="-1771.9" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="24.15" y="-1755.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;toString(value: uint256): string</text>
<text text-anchor="start" x="24.15" y="-1738.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;toHexString(value: uint256): string</text>
<text text-anchor="start" x="24.15" y="-1721.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;toHexString(value: uint256, length: uint256): string</text>
<text text-anchor="start" x="24.15" y="-1704.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;toHexString(addr: address): string</text>
<text text-anchor="start" x="24.15" y="-1687.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;log10(value: uint256): uint256</text>
<text text-anchor="start" x="24.15" y="-1671.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;log256(value: uint256): uint256</text>
</g>
<!-- 0&#45;&gt;18 -->
<g id="edge1" class="edge">
<title>0&#45;&gt;18</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1698.93,-1312.43C1293.41,-1323.54 562.75,-1363.06 345,-1503.6 290.5,-1538.77 250.97,-1598.31 223.9,-1653.42"/>
<polygon fill="black" stroke="black" points="220.68,-1652.05 219.5,-1662.58 226.99,-1655.09 220.68,-1652.05"/>
</g>
<!-- 1 -->
<g id="node2" class="node">
<title>1</title>
<polygon fill="#f2f2f2" stroke="black" points="1698.78,-335.3 1698.78,-796.1 2393.22,-796.1 2393.22,-335.3 1698.78,-335.3"/>
<text text-anchor="middle" x="2046" y="-779.5" font-family="Times,serif" font-size="14.00">MidasFactory721</text>
<text text-anchor="middle" x="2046" y="-762.7" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/MidasFactory721.sol</text>
<polyline fill="none" stroke="black" points="1698.78,-754.5 2393.22,-754.5 "/>
<text text-anchor="start" x="1706.78" y="-737.9" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="1706.78" y="-721.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;owner: address</text>
<text text-anchor="start" x="1706.78" y="-704.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;pairImplementation: address</text>
<text text-anchor="start" x="1706.78" y="-687.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;lptImplementation: address</text>
<text text-anchor="start" x="1706.78" y="-670.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;feeEnabled: uint128</text>
<text text-anchor="start" x="1706.78" y="-653.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;royaltyRate: uint128</text>
<text text-anchor="start" x="1706.78" y="-637.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;royaltyEngine: IRoyaltyEngineV1</text>
<text text-anchor="start" x="1706.78" y="-620.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="1706.78" y="-603.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;getPairERC721: mapping(address=&gt;mapping(address=&gt;address))</text>
<text text-anchor="start" x="1706.78" y="-586.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;getLPTokenERC721: mapping(address=&gt;mapping(address=&gt;address))</text>
<polyline fill="none" stroke="black" points="1698.78,-578.5 2393.22,-578.5 "/>
<text text-anchor="start" x="1706.78" y="-561.9" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="1706.78" y="-545.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_setRoyaltyInfo(_tokenX: address, _tokenY: address)</text>
<text text-anchor="start" x="1706.78" y="-528.3" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="1706.78" y="-511.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;feeRecipient(): (_feeRecipient: address)</text>
<text text-anchor="start" x="1706.78" y="-494.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;createERC721Pair(_tokenX: address, _tokenY: address): (lpToken: address, pair: address) &lt;&lt;noDelegateCall&gt;&gt;</text>
<text text-anchor="start" x="1706.78" y="-477.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setOwner(_owner: address)</text>
<text text-anchor="start" x="1706.78" y="-461.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setNewRoyaltyRate(_newRate: uint128)</text>
<text text-anchor="start" x="1706.78" y="-444.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setRoyaltyInfo(_tokenX: address, _tokenY: address)</text>
<text text-anchor="start" x="1706.78" y="-427.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setPairImplementation(_newPairImplementation: address)</text>
<text text-anchor="start" x="1706.78" y="-410.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setLptImplementation(_newLptImplementation: address)</text>
<text text-anchor="start" x="1706.78" y="-393.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setRoyaltyEngine(_newRoyaltyEngine: address)</text>
<text text-anchor="start" x="1706.78" y="-377.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;flashLoan(_tokenX: address, _tokenY: address, receiver: IMidasFlashLoanCallback, _tokenIds: uint256[], data: bytes)</text>
<text text-anchor="start" x="1706.78" y="-360.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="1706.78" y="-343.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;constructor(_feeRate: uint128, _royaltyRate: uint128, _royaltyEngine: address)</text>
</g>
<!-- 1&#45;&gt;0 -->
<g id="edge3" class="edge">
<title>1&#45;&gt;0</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M2024.26,-796.34C2014.51,-899.33 2003.15,-1019.34 1993.9,-1117.03"/>
<polygon fill="black" stroke="black" points="1990.41,-1116.73 1992.95,-1127.02 1997.38,-1117.39 1990.41,-1116.73"/>
</g>
<!-- 11 -->
<g id="node8" class="node">
<title>11</title>
<polygon fill="#f2f2f2" stroke="black" points="354.15,-1708.9 354.15,-1859.3 1059.85,-1859.3 1059.85,-1708.9 354.15,-1708.9"/>
<text text-anchor="middle" x="707" y="-1842.7" font-family="Times,serif" font-size="14.00">&lt;&lt;Library&gt;&gt;</text>
<text text-anchor="middle" x="707" y="-1825.9" font-family="Times,serif" font-size="14.00">ImmutableClone</text>
<text text-anchor="middle" x="707" y="-1809.1" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/libraries/ImmutableClone.sol</text>
<polyline fill="none" stroke="black" points="354.15,-1800.9 1059.85,-1800.9 "/>
<text text-anchor="start" x="362.15" y="-1784.3" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="362.15" y="-1767.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;cloneDeterministic(implementation: address, data: bytes, salt: bytes32): (instance: address)</text>
<text text-anchor="start" x="362.15" y="-1750.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;initCodeHash(implementation: address, data: bytes): (hash: bytes32)</text>
<text text-anchor="start" x="362.15" y="-1733.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;predictDeterministicAddress(implementation: address, data: bytes, salt: bytes32, deployer: address): (predicted: address)</text>
<text text-anchor="start" x="362.15" y="-1717.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;predictDeterministicAddress(hash: bytes32, salt: bytes32, deployer: address): (predicted: address)</text>
</g>
<!-- 1&#45;&gt;11 -->
<g id="edge2" class="edge">
<title>1&#45;&gt;11</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M2201.87,-796.29C2323.61,-1006.52 2444.32,-1312.06 2262,-1495.6 2250.32,-1507.36 1084.66,-1498.2 1069,-1503.6 955.12,-1542.88 849.07,-1633.77 781.57,-1701.3"/>
<polygon fill="black" stroke="black" points="778.9,-1699.02 774.35,-1708.59 783.87,-1703.95 778.9,-1699.02"/>
</g>
<!-- 2 -->
<g id="node3" class="node">
<title>2</title>
<polygon fill="#f2f2f2" stroke="black" points="2410.97,-41.3 2410.97,-1090.1 3137.03,-1090.1 3137.03,-41.3 2410.97,-41.3"/>
<text text-anchor="middle" x="2774" y="-1073.5" font-family="Times,serif" font-size="14.00">MidasPair721</text>
<text text-anchor="middle" x="2774" y="-1056.7" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/MidasPair721.sol</text>
<polyline fill="none" stroke="black" points="2410.97,-1048.5 3137.03,-1048.5 "/>
<text text-anchor="start" x="2418.97" y="-1031.9" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="2418.97" y="-1015.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;MAX: uint256</text>
<text text-anchor="start" x="2418.97" y="-998.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;_Reserves: bytes32</text>
<text text-anchor="start" x="2418.97" y="-981.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;_Fees: bytes32</text>
<text text-anchor="start" x="2418.97" y="-964.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;_RoyaltyInfo: bytes32</text>
<text text-anchor="start" x="2418.97" y="-947.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;_IDs: bytes32</text>
<text text-anchor="start" x="2418.97" y="-931.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;creators: address[]</text>
<text text-anchor="start" x="2418.97" y="-914.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;creatorShares: uint256[]</text>
<text text-anchor="start" x="2418.97" y="-897.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;_tree: TreeMath.TreeUint24</text>
<text text-anchor="start" x="2418.97" y="-880.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;_tree2: TreeMath.TreeUint24</text>
<text text-anchor="start" x="2418.97" y="-863.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;_bins: mapping(uint24=&gt;bytes32)</text>
<text text-anchor="start" x="2418.97" y="-847.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;lpInfos: mapping(uint128=&gt;bytes32)</text>
<text text-anchor="start" x="2418.97" y="-830.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;lpTokenAssetsMap: mapping(uint128=&gt;uint256[])</text>
<text text-anchor="start" x="2418.97" y="-813.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;assetLPMap: mapping(uint256=&gt;uint128)</text>
<text text-anchor="start" x="2418.97" y="-796.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;binLPMap: mapping(uint24=&gt;uint128[])</text>
<text text-anchor="start" x="2418.97" y="-779.9" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="2418.97" y="-763.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;factory: IMidasFactory721</text>
<polyline fill="none" stroke="black" points="2410.97,-754.9 3137.03,-754.9 "/>
<text text-anchor="start" x="2418.97" y="-738.3" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="2418.97" y="-721.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;tokenX(): IERC721</text>
<text text-anchor="start" x="2418.97" y="-704.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;tokenY(): IERC20</text>
<text text-anchor="start" x="2418.97" y="-687.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;lpToken(): LPToken</text>
<text text-anchor="start" x="2418.97" y="-671.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_rate(): uint128</text>
<text text-anchor="start" x="2418.97" y="-654.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_getPriceFromBin(_id: uint24): uint128</text>
<text text-anchor="start" x="2418.97" y="-637.5" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="2418.97" y="-620.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_checkNFTOwner(_NFTID: uint256)</text>
<text text-anchor="start" x="2418.97" y="-603.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_checkLPTOwner(_lpTokenID: uint256, _to: address)</text>
<text text-anchor="start" x="2418.97" y="-587.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_checkSenderAddress(_target: address)</text>
<text text-anchor="start" x="2418.97" y="-570.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_updateIDs(currentPositionID: uint128)</text>
<text text-anchor="start" x="2418.97" y="-553.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_updateFees(amount: uint128)</text>
<text text-anchor="start" x="2418.97" y="-536.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_updateLpInfo(_lpToken: uint128, amountY: uint128)</text>
<text text-anchor="start" x="2418.97" y="-519.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_updateAssetMapBuy(_lpTokenID: uint128, _NFTID: uint256): (_currentID: uint24)</text>
<text text-anchor="start" x="2418.97" y="-503.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_updateAssetMapSell(_lpTokenID: uint128, _tradeID: uint24, _NFTID: uint256)</text>
<text text-anchor="start" x="2418.97" y="-486.3" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="2418.97" y="-469.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;initialize()</text>
<text text-anchor="start" x="2418.97" y="-452.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getTokenX(): IERC721</text>
<text text-anchor="start" x="2418.97" y="-435.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getTokenY(): IERC20</text>
<text text-anchor="start" x="2418.97" y="-419.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getLPToken(): LPToken</text>
<text text-anchor="start" x="2418.97" y="-402.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getReserves(): (uint128, uint128)</text>
<text text-anchor="start" x="2418.97" y="-385.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getIDs(): (bestOfferID: uint24, floorPriceID: uint24, currentPositionID: uint128)</text>
<text text-anchor="start" x="2418.97" y="-368.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getGlobalFees(): (uint128, uint128)</text>
<text text-anchor="start" x="2418.97" y="-351.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;feeParameters(): (rate: uint128, protocolRate: uint128, royaltyRate: uint128)</text>
<text text-anchor="start" x="2418.97" y="-335.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getBin(_id: uint24): (uint128, uint128)</text>
<text text-anchor="start" x="2418.97" y="-318.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getLpInfos(_LPtokenID: uint128): (uint24, uint24, uint128)</text>
<text text-anchor="start" x="2418.97" y="-301.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getPriceFromBin(_id: uint24): uint128</text>
<text text-anchor="start" x="2418.97" y="-284.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getLPFromNFT(_NFTID: uint256): uint128</text>
<text text-anchor="start" x="2418.97" y="-267.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getBinParamFromLP(_lpTokenID: uint128, _amount: uint256): (_totalPrice: uint128)</text>
<text text-anchor="start" x="2418.97" y="-251.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getLpReserve(_lpTokenID: uint128): (uint128, uint128)</text>
<text text-anchor="start" x="2418.97" y="-234.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;sellNFT(NFTID: uint256, _to: address): (_amountOut: uint128) &lt;&lt;nonReentrant&gt;&gt;</text>
<text text-anchor="start" x="2418.97" y="-217.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;buyNFT(NFTID: uint256, _to: address) &lt;&lt;nonReentrant&gt;&gt;</text>
<text text-anchor="start" x="2418.97" y="-200.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;mintNFT(_ids: uint24[], _NFTIDs: uint256[], _to: address, isLimited: bool): (uint256, uint128) &lt;&lt;nonReentrant&gt;&gt;</text>
<text text-anchor="start" x="2418.97" y="-183.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;mintFT(_ids: uint24[], _to: address): (uint128, uint128) &lt;&lt;nonReentrant&gt;&gt;</text>
<text text-anchor="start" x="2418.97" y="-167.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;burn(_LPtokenID: uint128, _nftReceiver: address, _to: address): (amountX: uint128, amountY: uint128) &lt;&lt;nonReentrant&gt;&gt;</text>
<text text-anchor="start" x="2418.97" y="-150.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;collectProtocolFees(): (amountY: uint128)</text>
<text text-anchor="start" x="2418.97" y="-133.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;collectLPFees(_LPtokenID: uint128, _to: address): (amountFee: uint128) &lt;&lt;nonReentrant&gt;&gt;</text>
<text text-anchor="start" x="2418.97" y="-116.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;collectRoyaltyFees(): (_royaltyFees: uint128) &lt;&lt;nonReentrant&gt;&gt;</text>
<text text-anchor="start" x="2418.97" y="-99.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;updateRoyalty(_newRate: uint128, newrecipients: address[], newshares: uint256[])</text>
<text text-anchor="start" x="2418.97" y="-83.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;flashLoan(receiver: IMidasFlashLoanCallback, _tokenIds: uint256[], data: bytes)</text>
<text text-anchor="start" x="2418.97" y="-66.3" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="2418.97" y="-49.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;constructor(_factory: address)</text>
</g>
<!-- 2&#45;&gt;0 -->
<g id="edge12" class="edge">
<title>2&#45;&gt;0</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M2410.84,-1082.87C2407.91,-1085.48 2404.96,-1088.05 2402,-1090.6 2360.23,-1126.57 2311.41,-1158.39 2262.02,-1185.79"/>
<polygon fill="black" stroke="black" points="2260.2,-1182.8 2253.12,-1190.68 2263.57,-1188.94 2260.2,-1182.8"/>
</g>
<!-- 10 -->
<g id="node7" class="node">
<title>10</title>
<polygon fill="#f2f2f2" stroke="black" points="3521,-1725.7 3521,-1842.5 4511,-1842.5 4511,-1725.7 3521,-1725.7"/>
<text text-anchor="middle" x="4016" y="-1825.9" font-family="Times,serif" font-size="14.00">&lt;&lt;Library&gt;&gt;</text>
<text text-anchor="middle" x="4016" y="-1809.1" font-family="Times,serif" font-size="14.00">FeeHelper</text>
<text text-anchor="middle" x="4016" y="-1792.3" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/libraries/FeeHelper.sol</text>
<polyline fill="none" stroke="black" points="3521,-1784.1 4511,-1784.1 "/>
<text text-anchor="start" x="3529" y="-1767.5" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="3529" y="-1750.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getFeeBaseAndDistribution(_amount: uint128, _rateFee: uint128, _rateRoyalty: uint128): (uint128, uint128, uint128)</text>
<text text-anchor="start" x="3529" y="-1733.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getFeeAmountDistributionWithRoyalty(_feeBase: uint128, _rateFee: uint128, _rateRoyalty: uint128): (_feesTotal: uint128, _feesProtocol: uint128, _feesRoyalty: uint128)</text>
</g>
<!-- 2&#45;&gt;10 -->
<g id="edge9" class="edge">
<title>2&#45;&gt;10</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M3137.1,-1081.11C3140.06,-1084.3 3143.03,-1087.46 3146,-1090.6 3396.74,-1355.48 3751.25,-1606.58 3919.79,-1719.96"/>
<polygon fill="black" stroke="black" points="3917.91,-1722.91 3928.16,-1725.58 3921.81,-1717.1 3917.91,-1722.91"/>
</g>
<!-- 12 -->
<g id="node9" class="node">
<title>12</title>
<polygon fill="#f2f2f2" stroke="black" points="4528.94,-1679.7 4528.94,-1888.5 4805.06,-1888.5 4805.06,-1679.7 4528.94,-1679.7"/>
<text text-anchor="middle" x="4667" y="-1871.9" font-family="Times,serif" font-size="14.00">&lt;&lt;Library&gt;&gt;</text>
<text text-anchor="middle" x="4667" y="-1855.1" font-family="Times,serif" font-size="14.00">Uint128x128Math</text>
<text text-anchor="middle" x="4667" y="-1838.3" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/libraries/Math128x128.sol</text>
<polyline fill="none" stroke="black" points="4528.94,-1830.1 4805.06,-1830.1 "/>
<text text-anchor="start" x="4536.94" y="-1813.5" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="4536.94" y="-1796.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;LOG_SCALE_OFFSET: uint256</text>
<text text-anchor="start" x="4536.94" y="-1779.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;LOG_SCALE: uint256</text>
<text text-anchor="start" x="4536.94" y="-1763.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;LOG_SCALE_SQUARED: uint256</text>
<text text-anchor="start" x="4536.94" y="-1746.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;SCALE: uint256</text>
<polyline fill="none" stroke="black" points="4528.94,-1738.1 4805.06,-1738.1 "/>
<text text-anchor="start" x="4536.94" y="-1721.5" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="4536.94" y="-1704.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;log2(x: uint256): (result: int256)</text>
<text text-anchor="start" x="4536.94" y="-1687.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;pow(x: uint256, y: int256): (result: uint256)</text>
</g>
<!-- 2&#45;&gt;12 -->
<g id="edge11" class="edge">
<title>2&#45;&gt;12</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M3137.11,-1085.08C3140.06,-1086.95 3143.02,-1088.79 3146,-1090.6 3246.12,-1151.33 3299.09,-1081.13 3407,-1126.6 3653.35,-1230.4 3629.67,-1407.33 3882,-1495.6 3915.46,-1507.3 4489.77,-1485.09 4520,-1503.6 4579.58,-1540.09 4616.27,-1609.51 4638.09,-1670.03"/>
<polygon fill="black" stroke="black" points="4634.86,-1671.39 4641.47,-1679.66 4641.46,-1669.07 4634.86,-1671.39"/>
</g>
<!-- 13 -->
<g id="node10" class="node">
<title>13</title>
<polygon fill="#f2f2f2" stroke="black" points="1078.31,-1717.3 1078.31,-1850.9 1507.69,-1850.9 1507.69,-1717.3 1078.31,-1717.3"/>
<text text-anchor="middle" x="1293" y="-1834.3" font-family="Times,serif" font-size="14.00">&lt;&lt;Library&gt;&gt;</text>
<text text-anchor="middle" x="1293" y="-1817.5" font-family="Times,serif" font-size="14.00">Math512Bits</text>
<text text-anchor="middle" x="1293" y="-1800.7" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/libraries/Math512Bits.sol</text>
<polyline fill="none" stroke="black" points="1078.31,-1792.5 1507.69,-1792.5 "/>
<text text-anchor="start" x="1086.31" y="-1775.9" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="1086.31" y="-1759.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_getMulProds(x: uint256, y: uint256): (prod0: uint256, prod1: uint256)</text>
<text text-anchor="start" x="1086.31" y="-1742.3" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="1086.31" y="-1725.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;mulShiftRoundDownS(x: uint256): (result: uint256)</text>
</g>
<!-- 2&#45;&gt;13 -->
<g id="edge4" class="edge">
<title>2&#45;&gt;13</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M2520,-1090.44C2417.82,-1300.83 2323.38,-1494.72 2322,-1495.6 2303.1,-1507.55 1537.11,-1493.82 1517,-1503.6 1429.63,-1546.08 1365.47,-1640.81 1328.73,-1708.2"/>
<polygon fill="black" stroke="black" points="1325.6,-1706.63 1323.95,-1717.1 1331.77,-1709.95 1325.6,-1706.63"/>
</g>
<!-- 14 -->
<g id="node11" class="node">
<title>14</title>
<polygon fill="#f2f2f2" stroke="black" points="1525.76,-1553.7 1525.76,-2014.5 1956.24,-2014.5 1956.24,-1553.7 1525.76,-1553.7"/>
<text text-anchor="middle" x="1741" y="-1997.9" font-family="Times,serif" font-size="14.00">&lt;&lt;Library&gt;&gt;</text>
<text text-anchor="middle" x="1741" y="-1981.1" font-family="Times,serif" font-size="14.00">PackedUint128Math</text>
<text text-anchor="middle" x="1741" y="-1964.3" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/libraries/PackedUint128Math.sol</text>
<polyline fill="none" stroke="black" points="1525.76,-1956.1 1956.24,-1956.1 "/>
<text text-anchor="start" x="1533.76" y="-1939.5" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="1533.76" y="-1922.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;OFFSET: uint256</text>
<text text-anchor="start" x="1533.76" y="-1905.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;MASK_128: uint256</text>
<text text-anchor="start" x="1533.76" y="-1889.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;MASK_128_PLUS_ONE: uint256</text>
<polyline fill="none" stroke="black" points="1525.76,-1880.9 1956.24,-1880.9 "/>
<text text-anchor="start" x="1533.76" y="-1864.3" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="1533.76" y="-1847.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;encode(x1: uint128, x2: uint128): (z: bytes32)</text>
<text text-anchor="start" x="1533.76" y="-1830.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;encodeFirst(x1: uint128): (z: bytes32)</text>
<text text-anchor="start" x="1533.76" y="-1813.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;decode(z: bytes32): (x1: uint128, x2: uint128)</text>
<text text-anchor="start" x="1533.76" y="-1797.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;decodeX(z: bytes32): (x: uint128)</text>
<text text-anchor="start" x="1533.76" y="-1780.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;decodeY(z: bytes32): (y: uint128)</text>
<text text-anchor="start" x="1533.76" y="-1763.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;decode(z: bytes32, first: bool): (x: uint128)</text>
<text text-anchor="start" x="1533.76" y="-1746.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;add(x: bytes32, y: bytes32): (z: bytes32)</text>
<text text-anchor="start" x="1533.76" y="-1729.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;add(x: bytes32, y1: uint128, y2: uint128): bytes32</text>
<text text-anchor="start" x="1533.76" y="-1713.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;sub(x: bytes32, y: bytes32): (z: bytes32)</text>
<text text-anchor="start" x="1533.76" y="-1696.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;sub(x: bytes32, y1: uint128, y2: uint128): bytes32</text>
<text text-anchor="start" x="1533.76" y="-1679.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;addFirst(a: bytes32, b: uint128): (z: bytes32)</text>
<text text-anchor="start" x="1533.76" y="-1662.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;addSecond(a: bytes32, b: uint128): (z: bytes32)</text>
<text text-anchor="start" x="1533.76" y="-1645.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;subFirst(a: bytes32, b: uint128): (z: bytes32)</text>
<text text-anchor="start" x="1533.76" y="-1629.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;subSecond(a: bytes32, b: uint128): (z: bytes32)</text>
<text text-anchor="start" x="1533.76" y="-1612.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setFirst(oldParams: bytes32, param: uint128): (newParams: bytes32)</text>
<text text-anchor="start" x="1533.76" y="-1595.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setSecond(oldParams: bytes32, param: uint128): (newParams: bytes32)</text>
<text text-anchor="start" x="1533.76" y="-1578.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;checkAddOverFlow(z: bytes32, a: bytes32)</text>
<text text-anchor="start" x="1533.76" y="-1561.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;checkSubOverFlow(z: bytes32, a: bytes32)</text>
</g>
<!-- 2&#45;&gt;14 -->
<g id="edge7" class="edge">
<title>2&#45;&gt;14</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M2634.86,-1090.34C2578.48,-1293.26 2522.15,-1481.02 2503,-1495.6 2479.26,-1513.68 1992.81,-1490.52 1966,-1503.6 1942.92,-1514.86 1921.43,-1529.75 1901.63,-1546.8"/>
<polygon fill="black" stroke="black" points="1899.3,-1544.19 1894.12,-1553.44 1903.93,-1549.43 1899.3,-1544.19"/>
</g>
<!-- 15 -->
<g id="node12" class="node">
<title>15</title>
<polygon fill="#f2f2f2" stroke="black" points="1974.51,-1666.9 1974.51,-1901.3 2527.49,-1901.3 2527.49,-1666.9 1974.51,-1666.9"/>
<text text-anchor="middle" x="2251" y="-1884.7" font-family="Times,serif" font-size="14.00">&lt;&lt;Library&gt;&gt;</text>
<text text-anchor="middle" x="2251" y="-1867.9" font-family="Times,serif" font-size="14.00">PackedUint24Math</text>
<text text-anchor="middle" x="2251" y="-1851.1" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/libraries/PackedUint24Math.sol</text>
<polyline fill="none" stroke="black" points="1974.51,-1842.9 2527.49,-1842.9 "/>
<text text-anchor="start" x="1982.51" y="-1826.3" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="1982.51" y="-1809.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getFirstUint24(params: bytes32): (baseFactor: uint24)</text>
<text text-anchor="start" x="1982.51" y="-1792.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getSecondUint24(params: bytes32): (baseFactor: uint24)</text>
<text text-anchor="start" x="1982.51" y="-1775.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getBothUint24(params: bytes32): (baseFactorA: uint24, baseFactorB: uint24)</text>
<text text-anchor="start" x="1982.51" y="-1759.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getUint128(params: bytes32): (baseFactor: uint128)</text>
<text text-anchor="start" x="1982.51" y="-1742.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getAll(params: bytes32): (baseFactorA: uint24, baseFactorB: uint24, baseFactorC: uint128)</text>
<text text-anchor="start" x="1982.51" y="-1725.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setBothUint24(oldParams: bytes32, paramA: uint24, paramB: uint24): (newParams: bytes32)</text>
<text text-anchor="start" x="1982.51" y="-1708.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setUint128(oldParams: bytes32, param: uint128): (newParams: bytes32)</text>
<text text-anchor="start" x="1982.51" y="-1691.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setAll(paramA: uint24, paramB: uint24, paramC: uint128): (newParams: bytes32)</text>
<text text-anchor="start" x="1982.51" y="-1675.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;addUint128(oldParams: bytes32, param: uint128): (newParams: bytes32)</text>
</g>
<!-- 2&#45;&gt;15 -->
<g id="edge8" class="edge">
<title>2&#45;&gt;15</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M2746.11,-1090.13C2725.33,-1267.91 2689.11,-1436.67 2626,-1495.6 2611.49,-1509.15 2555.04,-1495.29 2537,-1503.6 2461.72,-1538.29 2394.45,-1601.41 2344.1,-1658.9"/>
<polygon fill="black" stroke="black" points="2341.32,-1656.76 2337.42,-1666.61 2346.61,-1661.35 2341.32,-1656.76"/>
</g>
<!-- 16 -->
<g id="node13" class="node">
<title>16</title>
<polygon fill="#f2f2f2" stroke="black" points="2545.55,-1717.3 2545.55,-1850.9 3002.45,-1850.9 3002.45,-1717.3 2545.55,-1717.3"/>
<text text-anchor="middle" x="2774" y="-1834.3" font-family="Times,serif" font-size="14.00">&lt;&lt;Library&gt;&gt;</text>
<text text-anchor="middle" x="2774" y="-1817.5" font-family="Times,serif" font-size="14.00">PositionHelper</text>
<text text-anchor="middle" x="2774" y="-1800.7" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/libraries/PositionHelper.sol</text>
<polyline fill="none" stroke="black" points="2545.55,-1792.5 3002.45,-1792.5 "/>
<text text-anchor="start" x="2553.55" y="-1775.9" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="2553.55" y="-1759.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_checkBinSequence(arr: uint24[]): (originBin: uint24, commonDiff: uint24)</text>
<text text-anchor="start" x="2553.55" y="-1742.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_removeFirstItem(arr: uint128[]): uint128[]</text>
<text text-anchor="start" x="2553.55" y="-1725.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_findIndexAndRemove(arr: uint128[], target: uint128): uint128[]</text>
</g>
<!-- 2&#45;&gt;16 -->
<g id="edge10" class="edge">
<title>2&#45;&gt;16</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M2774,-1090.51C2774,-1328.02 2774,-1583.05 2774,-1706.89"/>
<polygon fill="black" stroke="black" points="2770.5,-1707.02 2774,-1717.02 2777.5,-1707.02 2770.5,-1707.02"/>
</g>
<!-- 19 -->
<g id="node15" class="node">
<title>19</title>
<polygon fill="#f2f2f2" stroke="black" points="4823.25,-1692.1 4823.25,-1876.1 5438.75,-1876.1 5438.75,-1692.1 4823.25,-1692.1"/>
<text text-anchor="middle" x="5131" y="-1859.5" font-family="Times,serif" font-size="14.00">&lt;&lt;Library&gt;&gt;</text>
<text text-anchor="middle" x="5131" y="-1842.7" font-family="Times,serif" font-size="14.00">TokenHelper</text>
<text text-anchor="middle" x="5131" y="-1825.9" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/libraries/TokenHelper.sol</text>
<polyline fill="none" stroke="black" points="4823.25,-1817.7 5438.75,-1817.7 "/>
<text text-anchor="start" x="4831.25" y="-1801.1" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="4831.25" y="-1784.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_callAndCatchError(target: address, data: bytes): bytes</text>
<text text-anchor="start" x="4831.25" y="-1767.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_isContract(account: address): bool</text>
<text text-anchor="start" x="4831.25" y="-1750.7" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="4831.25" y="-1733.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;safeTransferFrom(token: IERC20, owner: address, recipient: address, amount: uint256)</text>
<text text-anchor="start" x="4831.25" y="-1717.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;safeTransfer(token: IERC20, recipient: address, amount: uint256)</text>
<text text-anchor="start" x="4831.25" y="-1700.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;received(token: IERC20, reserve: uint128, fees: uint128, royalties: uint128): (_internalBalance: uint128)</text>
</g>
<!-- 2&#45;&gt;19 -->
<g id="edge6" class="edge">
<title>2&#45;&gt;19</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M3137.3,-1085.58C3140.18,-1087.29 3143.08,-1088.96 3146,-1090.6 3245.45,-1146.46 3548.36,-1095.17 3658,-1126.6 3994.19,-1222.96 4014.38,-1408.15 4353,-1495.6 4402.6,-1508.41 4766.24,-1485.08 4814,-1503.6 4908.99,-1540.44 4994.19,-1619.55 5052.28,-1684.23"/>
<polygon fill="black" stroke="black" points="5049.97,-1686.89 5059.23,-1692.04 5055.2,-1682.24 5049.97,-1686.89"/>
</g>
<!-- 20 -->
<g id="node17" class="node">
<title>20</title>
<polygon fill="#f2f2f2" stroke="black" points="3020.53,-1675.3 3020.53,-1892.9 3503.47,-1892.9 3503.47,-1675.3 3020.53,-1675.3"/>
<text text-anchor="middle" x="3262" y="-1876.3" font-family="Times,serif" font-size="14.00">&lt;&lt;Library&gt;&gt;</text>
<text text-anchor="middle" x="3262" y="-1859.5" font-family="Times,serif" font-size="14.00">TreeMath</text>
<text text-anchor="middle" x="3262" y="-1842.7" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/libraries/TreeMath.sol</text>
<polyline fill="none" stroke="black" points="3020.53,-1834.5 3503.47,-1834.5 "/>
<text text-anchor="start" x="3028.53" y="-1817.9" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="3028.53" y="-1801.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_closestBitRight(leaves: bytes32, bit: uint8): uint256</text>
<text text-anchor="start" x="3028.53" y="-1784.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_closestBitLeft(leaves: bytes32, bit: uint8): uint256</text>
<text text-anchor="start" x="3028.53" y="-1767.5" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="3028.53" y="-1750.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;add(tree: TreeUint24, id: uint24)</text>
<text text-anchor="start" x="3028.53" y="-1733.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;remove(tree: TreeUint24, id: uint24)</text>
<text text-anchor="start" x="3028.53" y="-1717.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;findFirstRight(tree: TreeUint24, id: uint24): uint24</text>
<text text-anchor="start" x="3028.53" y="-1700.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;findFirstLeft(tree: TreeUint24, id: uint24): uint24</text>
<text text-anchor="start" x="3028.53" y="-1683.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;updateBins(_tree: TreeUint24, _tree2: TreeUint24): (_bin: uint24, _bin2: uint24)</text>
</g>
<!-- 2&#45;&gt;20 -->
<g id="edge5" class="edge">
<title>2&#45;&gt;20</title>
<path fill="none" stroke="black" d="M2984.14,-1090.51C3069.85,-1304.15 3161.25,-1531.97 3214.91,-1665.73"/>
<polygon fill="black" stroke="black" points="3211.74,-1667.22 3218.71,-1675.2 3218.24,-1664.61 3211.74,-1667.22"/>
</g>
<!-- 3 -->
<g id="node4" class="node">
<title>3</title>
<polygon fill="#f2f2f2" stroke="black" points="3155.33,-301.7 3155.33,-829.7 4072.67,-829.7 4072.67,-301.7 3155.33,-301.7"/>
<text text-anchor="middle" x="3614" y="-813.1" font-family="Times,serif" font-size="14.00">MidasRouter</text>
<text text-anchor="middle" x="3614" y="-796.3" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/MidasRouter.sol</text>
<polyline fill="none" stroke="black" points="3155.33,-788.1 4072.67,-788.1 "/>
<text text-anchor="start" x="3163.33" y="-771.5" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="3163.33" y="-754.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;weth: IWETH</text>
<text text-anchor="start" x="3163.33" y="-737.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;factory: IMidasFactory721</text>
<polyline fill="none" stroke="black" points="3155.33,-729.7 4072.67,-729.7 "/>
<text text-anchor="start" x="3163.33" y="-713.1" font-family="Times,serif" font-size="14.00">Private:</text>
<text text-anchor="start" x="3163.33" y="-696.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_safeTransferETH(_to: address, _amount: uint256)</text>
<text text-anchor="start" x="3163.33" y="-679.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_wethDepositAndTransfer(_to: address, _amount: uint256)</text>
<text text-anchor="start" x="3163.33" y="-662.7" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="3163.33" y="-645.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_getAmountsToAdd(_pair: address, _ids: uint24[]): (ftAmount: uint128)</text>
<text text-anchor="start" x="3163.33" y="-629.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;_getMinAmountIn(_pair: address, _tokenIds: uint256[]): (totalAmount: uint128)</text>
<text text-anchor="start" x="3163.33" y="-612.3" font-family="Times,serif" font-size="14.00">External:</text>
<text text-anchor="start" x="3163.33" y="-595.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;payable&gt;&gt; null()</text>
<text text-anchor="start" x="3163.33" y="-578.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;payable&gt;&gt; addLiquidityETH(_tokenX: address, _tokenY: address, _ids: uint24[], _deadline: uint256): (idAmount: uint256, lpTokenId: uint128)</text>
<text text-anchor="start" x="3163.33" y="-561.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;payable&gt;&gt; sellItemsToETH(_tokenX: address, _tokenY: address, _tokenIds: uint256[], _deadline: uint256): (_ftAmount: uint128)</text>
<text text-anchor="start" x="3163.33" y="-545.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&lt;&lt;payable&gt;&gt; buyItemsWithETH(_tokenX: address, _tokenY: address, _tokenIds: uint256[], _deadline: uint256): (_ftAmount: uint128)</text>
<text text-anchor="start" x="3163.33" y="-528.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;addLiquidityERC721(_tokenX: address, _tokenY: address, _ids: uint24[], _tokenIds: uint256[], _deadline: uint256): (idAmount: uint256, lpTokenId: uint128)</text>
<text text-anchor="start" x="3163.33" y="-511.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;addLiquidityERC20(_tokenX: address, _tokenY: address, _ids: uint24[], _deadline: uint256): (idAmount: uint256, lpTokenId: uint128)</text>
<text text-anchor="start" x="3163.33" y="-494.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;removeLiquidity(_tokenX: address, _tokenY: address, _lpTokenId: uint128, _deadline: uint256): (ftAmount: uint128)</text>
<text text-anchor="start" x="3163.33" y="-477.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;removeLiquidityETH(_tokenX: address, _tokenY: address, _lpTokenId: uint128, _deadline: uint256): (ftAmount: uint128)</text>
<text text-anchor="start" x="3163.33" y="-461.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;sellItems(_tokenX: address, _tokenY: address, _tokenIds: uint256[], _deadline: uint256): (_ftAmount: uint128)</text>
<text text-anchor="start" x="3163.33" y="-444.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;buyItems(_tokenX: address, _tokenY: address, _tokenIds: uint256[], _deadline: uint256): (_ftAmount: uint128)</text>
<text text-anchor="start" x="3163.33" y="-427.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;openLimitOrder(_tokenX: address, _tokenY: address, _ids: uint24[], _tokenIds: uint256[], _deadline: uint256): (idAmount: uint256, lpTokenId: uint128)</text>
<text text-anchor="start" x="3163.33" y="-410.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;openMultiLimitOrders(_tokenX: address, _tokenY: address, _ids: uint24[], _tokenIds: uint256[], _deadline: uint256): (lpTokenIds: uint128[])</text>
<text text-anchor="start" x="3163.33" y="-393.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;claimFee(_tokenX: address, _tokenY: address, _lpTokenId: uint128): (_feeClaimed: uint128)</text>
<text text-anchor="start" x="3163.33" y="-377.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;claimAll(_tokenX: address, _tokenY: address, _lpTokenIds: uint128[]): (_feeClaimed: uint128)</text>
<text text-anchor="start" x="3163.33" y="-360.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getMinAmountIn(_pair: address, _tokenIds: uint256[]): uint128</text>
<text text-anchor="start" x="3163.33" y="-343.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;getAmountsToAdd(_pair: address, _ids: uint24[]): uint128</text>
<text text-anchor="start" x="3163.33" y="-326.7" font-family="Times,serif" font-size="14.00">Public:</text>
<text text-anchor="start" x="3163.33" y="-309.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;constructor(_weth: IWETH, _factory: IMidasFactory721)</text>
</g>
<!-- 3&#45;&gt;19 -->
<g id="edge13" class="edge">
<title>3&#45;&gt;19</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M3962.31,-829.88C4204.18,-1014.76 4532.31,-1269.81 4814,-1503.6 4884.79,-1562.36 4962.28,-1630.61 5022.93,-1684.96"/>
<polygon fill="black" stroke="black" points="5020.84,-1687.78 5030.62,-1691.85 5025.51,-1682.57 5020.84,-1687.78"/>
</g>
<!-- 5 -->
<g id="node5" class="node">
<title>5</title>
<polygon fill="#f2f2f2" stroke="black" points="3956.72,-2068.3 3956.72,-2218.7 4275.28,-2218.7 4275.28,-2068.3 3956.72,-2068.3"/>
<text text-anchor="middle" x="4116" y="-2202.1" font-family="Times,serif" font-size="14.00">&lt;&lt;Library&gt;&gt;</text>
<text text-anchor="middle" x="4116" y="-2185.3" font-family="Times,serif" font-size="14.00">BitMath</text>
<text text-anchor="middle" x="4116" y="-2168.5" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/libraries/BitMath.sol</text>
<polyline fill="none" stroke="black" points="3956.72,-2160.3 4275.28,-2160.3 "/>
<text text-anchor="start" x="3964.72" y="-2143.7" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="3964.72" y="-2126.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;closestBitRight(x: uint256, bit: uint8): (id: uint256)</text>
<text text-anchor="start" x="3964.72" y="-2110.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;closestBitLeft(x: uint256, bit: uint8): (id: uint256)</text>
<text text-anchor="start" x="3964.72" y="-2093.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;mostSignificantBit(x: uint256): (msb: uint8)</text>
<text text-anchor="start" x="3964.72" y="-2076.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;leastSignificantBit(x: uint256): (lsb: uint8)</text>
</g>
<!-- 9 -->
<g id="node6" class="node">
<title>9</title>
<polygon fill="#f2f2f2" stroke="black" points="5457.17,-1536.9 5457.17,-2031.3 6012.83,-2031.3 6012.83,-1536.9 5457.17,-1536.9"/>
<text text-anchor="middle" x="5735" y="-2014.7" font-family="Times,serif" font-size="14.00">&lt;&lt;Library&gt;&gt;</text>
<text text-anchor="middle" x="5735" y="-1997.9" font-family="Times,serif" font-size="14.00">Encoded</text>
<text text-anchor="middle" x="5735" y="-1981.1" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/libraries/Encoded.sol</text>
<polyline fill="none" stroke="black" points="5457.17,-1972.9 6012.83,-1972.9 "/>
<text text-anchor="start" x="5465.17" y="-1956.3" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="5465.17" y="-1939.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;MASK_UINT1: uint256</text>
<text text-anchor="start" x="5465.17" y="-1922.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;MASK_UINT8: uint256</text>
<text text-anchor="start" x="5465.17" y="-1905.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;MASK_UINT12: uint256</text>
<text text-anchor="start" x="5465.17" y="-1889.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;MASK_UINT14: uint256</text>
<text text-anchor="start" x="5465.17" y="-1872.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;MASK_UINT16: uint256</text>
<text text-anchor="start" x="5465.17" y="-1855.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;MASK_UINT20: uint256</text>
<text text-anchor="start" x="5465.17" y="-1838.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;MASK_UINT24: uint256</text>
<text text-anchor="start" x="5465.17" y="-1821.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;MASK_UINT40: uint256</text>
<text text-anchor="start" x="5465.17" y="-1805.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;MASK_UINT64: uint256</text>
<text text-anchor="start" x="5465.17" y="-1788.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;MASK_UINT128: uint256</text>
<polyline fill="none" stroke="black" points="5457.17,-1780.1 6012.83,-1780.1 "/>
<text text-anchor="start" x="5465.17" y="-1763.5" font-family="Times,serif" font-size="14.00">Internal:</text>
<text text-anchor="start" x="5465.17" y="-1746.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;set(encoded: bytes32, value: uint256, mask: uint256, offset: uint256): (newEncoded: bytes32)</text>
<text text-anchor="start" x="5465.17" y="-1729.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;setBool(encoded: bytes32, boolean: bool, offset: uint256): (newEncoded: bytes32)</text>
<text text-anchor="start" x="5465.17" y="-1713.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;decode(encoded: bytes32, mask: uint256, offset: uint256): (value: uint256)</text>
<text text-anchor="start" x="5465.17" y="-1696.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;decodeBool(encoded: bytes32, offset: uint256): (boolean: bool)</text>
<text text-anchor="start" x="5465.17" y="-1679.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;decodeUint8(encoded: bytes32, offset: uint256): (value: uint8)</text>
<text text-anchor="start" x="5465.17" y="-1662.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;decodeUint12(encoded: bytes32, offset: uint256): (value: uint16)</text>
<text text-anchor="start" x="5465.17" y="-1645.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;decodeUint14(encoded: bytes32, offset: uint256): (value: uint16)</text>
<text text-anchor="start" x="5465.17" y="-1629.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;decodeUint16(encoded: bytes32, offset: uint256): (value: uint16)</text>
<text text-anchor="start" x="5465.17" y="-1612.3" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;decodeUint20(encoded: bytes32, offset: uint256): (value: uint24)</text>
<text text-anchor="start" x="5465.17" y="-1595.5" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;decodeUint24(encoded: bytes32, offset: uint256): (value: uint24)</text>
<text text-anchor="start" x="5465.17" y="-1578.7" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;decodeUint40(encoded: bytes32, offset: uint256): (value: uint40)</text>
<text text-anchor="start" x="5465.17" y="-1561.9" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;decodeUint64(encoded: bytes32, offset: uint256): (value: uint64)</text>
<text text-anchor="start" x="5465.17" y="-1545.1" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;decodeUint128(encoded: bytes32, offset: uint256): (value: uint128)</text>
</g>
<!-- 12&#45;&gt;5 -->
<g id="edge14" class="edge">
<title>12&#45;&gt;5</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M4627.23,-1888.7C4603.18,-1938.63 4567.81,-1995.42 4520,-2031.8 4452.7,-2083 4363.19,-2110.53 4285.53,-2125.33"/>
<polygon fill="black" stroke="black" points="4284.83,-2121.9 4275.64,-2127.16 4286.11,-2128.78 4284.83,-2121.9"/>
</g>
<!-- 21 -->
<g id="node16" class="node">
<title>21</title>
<polygon fill="#f2f2f2" stroke="black" points="3135.62,-2085.1 3135.62,-2201.9 3388.38,-2201.9 3388.38,-2085.1 3135.62,-2085.1"/>
<text text-anchor="middle" x="3262" y="-2185.3" font-family="Times,serif" font-size="14.00">&lt;&lt;Struct&gt;&gt;</text>
<text text-anchor="middle" x="3262" y="-2168.5" font-family="Times,serif" font-size="14.00">TreeUint24</text>
<text text-anchor="middle" x="3262" y="-2151.7" font-family="Times,serif" font-size="14.00">midaswap&#45;protocol/libraries/TreeMath.sol</text>
<polyline fill="none" stroke="black" points="3135.62,-2143.5 3388.38,-2143.5 "/>
<text text-anchor="start" x="3143.62" y="-2126.9" font-family="Times,serif" font-size="14.00">level0: bytes32</text>
<text text-anchor="start" x="3143.62" y="-2110.1" font-family="Times,serif" font-size="14.00">level1: mapping(bytes32=&gt;bytes32)</text>
<text text-anchor="start" x="3143.62" y="-2093.3" font-family="Times,serif" font-size="14.00">level2: mapping(bytes32=&gt;bytes32)</text>
</g>
<!-- 21&#45;&gt;20 -->
<g id="edge15" class="edge">
<title>21&#45;&gt;20</title>
<path fill="none" stroke="black" d="M3267.12,-2084.98C3268.69,-2036.73 3269.13,-1966.2 3268.42,-1905.66"/>
<polygon fill="black" stroke="black" points="3268.42,-1905.3 3264.34,-1899.35 3268.26,-1893.3 3272.34,-1899.25 3268.42,-1905.3"/>
</g>
<!-- 20&#45;&gt;5 -->
<g id="edge16" class="edge">
<title>20&#45;&gt;5</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M3345.14,-1892.96C3389.34,-1942.86 3447.77,-1998.36 3512,-2031.8 3647.45,-2102.32 3820.43,-2128.58 3946.53,-2138.03"/>
<polygon fill="black" stroke="black" points="3946.45,-2141.54 3956.67,-2138.76 3946.95,-2134.55 3946.45,-2141.54"/>
</g>
<!-- 20&#45;&gt;21 -->
<g id="edge17" class="edge">
<title>20&#45;&gt;21</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M3255.74,-1893.3C3254.88,-1952.31 3255.15,-2023.53 3256.57,-2074.7"/>
<polygon fill="black" stroke="black" points="3253.08,-2075.09 3256.88,-2084.98 3260.08,-2074.88 3253.08,-2075.09"/>
</g>
</g>
</svg>
